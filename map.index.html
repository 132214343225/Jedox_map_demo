<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        #map { height: 600px; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        // Initialize the map
        const map = L.map('map').setView([40.7128, -74.0060], 4); // Default center (New York)

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        // Function to add a marker
        function addMarker(lat, lng, sales, location) {
            L.marker([lat, lng])
                .addTo(map)
                .bindPopup(`<b>${location}</b><br>Sales: $${sales}`);
        }

        // Parse URL parameters
        const urlParams = new URLSearchParams(window.location.search);

        // Extract parameters (single location example)
        const lat = urlParams.get('lat');
        const lng = urlParams.get('lng');
        const sales = urlParams.get('sales');
        const location = urlParams.get('location');

        // Add marker if parameters exist
        if (lat && lng) {
            addMarker(parseFloat(lat), parseFloat(lng), sales, location);
        }

        // ---- ADVANCED: For multiple locations via JSON ----
        // const dataParam = urlParams.get('data');
        // if (dataParam) {
        //     const data = JSON.parse(decodeURIComponent(dataParam));
        //     data.forEach((item) => {
        //         addMarker(item.lat, item.lng, item.sales, item.location);
        //     });
        // }
    </script>
</body>
</html>